{% extends 'base.html' %}
{% load custom_filters %}

{% block title %}Projets{% endblock %}

{% block extra_css %}
<style>
    .project-card {
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .project-card:hover {
        transform: translateY(-12px);
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    }
    
    .project-card:hover .project-image {
        transform: scale(1.05);
    }
    
    .project-image {
        transition: transform 0.4s ease;
    }
    
    .skill-tag {
        transition: all 0.3s ease;
    }
    
    .skill-tag:hover {
        transform: translateY(-2px);
    }
</style>
{% endblock %}

{% block content %}
<!-- Projects Section -->
<section class="min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 py-24">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Section Header -->
        <div class="text-center mb-16">
            <span class="inline-flex items-center px-4 py-1.5 bg-green-500/20 border border-green-500/30 rounded-full text-sm font-medium text-green-400 mb-4">
                <i class="fas fa-folder-open mr-2"></i>Portfolio
            </span>
            <h1 class="text-4xl sm:text-5xl font-bold text-white mb-4">
                Mes <span class="gradient-text">Projets</span>
            </h1>
            <p class="text-gray-400 text-lg max-w-2xl mx-auto">
                Voici quelques projets que j'ai réalisés récemment avec passion et dedicación.
            </p>
        </div>

        <!-- Projects Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- ========== PROJETS STATIQUES ========== -->
            
            <!-- Project Card 1: Site de gestion de colis -->
            <div class="project-card bg-gray-800/50 rounded-2xl overflow-hidden border border-gray-700/50 backdrop-blur-sm">
                <div class="overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1553413077-190dd305871c?auto=format&fit=crop&w=800&q=80" 
                         alt="Site de gestion de colis" 
                         class="project-image w-full h-52 object-cover">
                </div>
                <div class="p-6">
                    <h3 class="text-xl font-semibold text-green-400 mb-2">Site de gestion de colis</h3>
                    <p class="text-gray-300 mb-2 text-sm">
                        <span class="px-2 py-1 bg-yellow-600/30 text-yellow-400 text-xs rounded">Projet personnel (en cours)</span>
                    </p>
                    <p class="text-gray-300 mb-4 text-sm leading-relaxed">
                        Développement d'une application web de suivi et gestion de colis avec authentification, gestion des statuts et historique.
                    </p>
                    <div class="flex flex-wrap gap-2 mb-4">
                        <span class="skill-tag px-3 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-full">Python</span>
                        <span class="skill-tag px-3 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-full">Django</span>
                        <span class="skill-tag px-3 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-full">PostgreSQL</span>
                        <span class="skill-tag px-3 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-full">React</span>
                        <span class="skill-tag px-3 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-full">Tailwind CSS</span>
                    </div>
                </div>
            </div>

            <!-- Project Card 2: Portfolio personnel -->
            <div class="project-card bg-gray-800/50 rounded-2xl overflow-hidden border border-gray-700/50 backdrop-blur-sm">
                <div class="overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1467232004584-a241de8bcf5d?auto=format&fit=crop&w=800&q=80" 
                         alt="Portfolio personnel" 
                         class="project-image w-full h-52 object-cover">
                </div>
                <div class="p-6">
                    <h3 class="text-xl font-semibold text-green-400 mb-2">Portfolio personnel</h3>
                    <p class="text-gray-300 mb-2 text-sm">
                        <span class="px-2 py-1 bg-green-600/30 text-green-400 text-xs rounded">Projet personnel (terminé)</span>
                    </p>
                    <p class="text-gray-300 mb-4 text-sm leading-relaxed">
                        Création de mon site portfolio professionnel avec design responsive et moderne. Présentation de mes projets et compétences.
                    </p>
                    <div class="flex flex-wrap gap-2 mb-4">
                        <span class="skill-tag px-3 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-full">HTML</span>
                        <span class="skill-tag px-3 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-full">CSS</span>
                        <span class="skill-tag px-3 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-full">JavaScript</span>
                        <span class="skill-tag px-3 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-full">React</span>
                    </div>
                </div>
            </div>

            <!-- Project Card 3: Site de gestion de poulets de chair -->
            <div class="project-card bg-gray-800/50 rounded-2xl overflow-hidden border border-gray-700/50 backdrop-blur-sm">
                <div class="overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1548550023-2bdb3c5beed7?auto=format&fit=crop&w=800&q=80" 
                         alt="Site de gestion de poulets de chair" 
                         class="project-image w-full h-52 object-cover">
                </div>
                <div class="p-6">
                    <h3 class="text-xl font-semibold text-green-400 mb-2">Site de gestion de poulets de chair</h3>
                    <p class="text-gray-300 mb-2 text-sm">
                        <span class="px-2 py-1 bg-yellow-600/30 text-yellow-400 text-xs rounded">Projet scolaire – Chef de projet (en cours)</span>
                    </p>
                    <p class="text-gray-300 mb-4 text-sm leading-relaxed">
                        Conception d'une application de gestion d'élevage avec suivi des stocks, alimentation, santé et ventes.
                    </p>
                    <div class="flex flex-wrap gap-2 mb-4">
                        <span class="skill-tag px-3 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-full">Django</span>
                        <span class="skill-tag px-3 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-full">Laravel</span>
                    </div>
                </div>
            </div>

            <!-- Project Card 4: Site de gestion des stocks -->
            <div class="project-card bg-gray-800/50 rounded-2xl overflow-hidden border border-gray-700/50 backdrop-blur-sm">
                <div class="overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&w=800&q=80" 
                         alt="Site de gestion des stocks" 
                         class="project-image w-full h-52 object-cover">
                </div>
                <div class="p-6">
                    <h3 class="text-xl font-semibold text-green-400 mb-2">Site de gestion des stocks</h3>
                    <p class="text-gray-300 mb-2 text-sm">
                        <span class="px-2 py-1 bg-green-600/30 text-green-400 text-xs rounded">Projet scolaire – Chef de projet (terminé)</span>
                    </p>
                    <p class="text-gray-300 mb-4 text-sm leading-relaxed">
                        Développement d'un système de gestion de stock avec entrées/sorties, alertes de rupture et rapports.
                    </p>
                    <div class="flex flex-wrap gap-2 mb-4">
                        <span class="skill-tag px-3 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-full">Python</span>
                        <span class="skill-tag px-3 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-full">Django</span>
                        <span class="skill-tag px-3 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-full">MySQL</span>
                    </div>
                </div>
            </div>

            <!-- Project Card 5: Plateforme agro-alimentaire -->
            <div class="project-card bg-gray-800/50 rounded-2xl overflow-hidden border border-gray-700/50 backdrop-blur-sm">
                <div class="overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1500937386664-56d1dfef3854?auto=format&fit=crop&w=800&q=80" 
                         alt="Plateforme agro-alimentaire" 
                         class="project-image w-full h-52 object-cover">
                </div>
                <div class="p-6">
                    <h3 class="text-xl font-semibold text-green-400 mb-2">Plateforme agro-alimentaire</h3>
                    <p class="text-gray-300 mb-2 text-sm">
                        <span class="px-2 py-1 bg-purple-600/30 text-purple-400 text-xs rounded">Projet d'équipe (phase d'analyse – en cours)</span>
                    </p>
                    <p class="text-gray-300 mb-4 text-sm leading-relaxed">
                        Conception d'une plateforme complète pour le secteur agro-alimentaire. Phase actuelle : analyse des besoins et cahier des charges.
                    </p>
                    <div class="flex flex-wrap gap-2 mb-4">
                        <span class="skill-tag px-3 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-full">Analyse</span>
                        <span class="skill-tag px-3 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-full">Conception</span>
                    </div>
                </div>
            </div>

            <!-- ========== PROJETS DYNAMIQUES (depuis la base de données) ========== -->
            {% load static %}
            {% for projet in projets %}
            <!-- Project Card Dynamic -->
            <!-- Debug: {{ projet.image }} | {{ projet.image.url }} | {{ projet.image.name }} -->
            <div class="project-card bg-gray-800/50 rounded-2xl overflow-hidden border border-gray-700/50 backdrop-blur-sm">
                <div class="overflow-hidden">
                    {% if projet.image %}
                    <img src="{{ projet.image.url }}" 
                         alt="{{ projet.titre }}" 
                         class="project-image w-full h-52 object-cover"
                         onerror="console.log('Image failed:', this.src); this.onerror=null; this.src='https://images.unsplash.com/photo-1467232004584-a241de8bcf5d?auto=format&fit=crop&w=800&q=80'">
                    {% else %}
                    <img src="https://images.unsplash.com/photo-1467232004584-a241de8bcf5d?auto=format&fit=crop&w=800&q=80" 
                         alt="{{ projet.titre }}" 
                         class="project-image w-full h-52 object-cover">
                    {% endif %}
                </div>
                <div class="p-6">
                    <h3 class="text-xl font-semibold text-green-400 mb-2">{{ projet.titre }}</h3>
                    <p class="text-gray-300 mb-2 text-sm">
                        {% if projet.etat == 'en_cours' %}
                        <span class="px-2 py-1 bg-yellow-600/30 text-yellow-400 text-xs rounded">Projet personnel (en cours)</span>
                        {% elif projet.etat == 'termine' %}
                        <span class="px-2 py-1 bg-green-600/30 text-green-400 text-xs rounded">Projet personnel (terminé)</span>
                        {% else %}
                        <span class="px-2 py-1 bg-purple-600/30 text-purple-400 text-xs rounded">En analyse</span>
                        {% endif %}
                    </p>
                    <p class="text-gray-300 mb-4 text-sm leading-relaxed">
                        {{ projet.description|truncatechars:150 }}
                    </p>
                    <div class="flex flex-wrap gap-2 mb-4">
                        {% with langages=projet.langages|split:"," %}
                        {% for langage in langages %}
                        <span class="skill-tag px-3 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-full">{{ langage.strip }}</span>
                        {% endfor %}
                        {% endwith %}
                    </div>
                </div>
            </div>
            {% empty %}
            <!-- Message when no dynamic projects -->
            {% endfor %}
        </div>

        <!-- Call to Action -->
        <div class="mt-16 text-center">
            <p class="text-gray-400 mb-6">Vous avez un projet en tête ? Parlons-en !</p>
            <a href="{% url 'contact' %}" class="inline-flex items-center px-8 py-4 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-1">
                <i class="fas fa-paper-plane mr-2"></i>
                Me contacter
            </a>
        </div>
    </div>
</section>
{% endblock %}
